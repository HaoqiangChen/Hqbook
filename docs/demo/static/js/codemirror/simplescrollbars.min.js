!function(a){"object"==typeof exports&&"object"==typeof module?a(require("../../lib/codemirror")):"function"==typeof define&&define.amd?define(["../../lib/codemirror"],a):a(CodeMirror)}(function(a){"use strict";function b(b,c,d){function f(b){var c=a.wheelEventPixels(b)["horizontal"==e.orientation?"x":"y"],d=e.pos;e.moveTo(e.pos+c),e.pos!=d&&a.e_preventDefault(b)}this.orientation=c,this.scroll=d,this.screen=this.total=this.size=1,this.pos=0,this.node=document.createElement("div"),this.node.className=b+"-"+c,this.inner=this.node.appendChild(document.createElement("div"));var e=this;a.on(this.inner,"mousedown",function(b){function g(){a.off(document,"mousemove",h),a.off(document,"mouseup",g)}function h(a){return 1!=a.which?g():(e.moveTo(f+(a[c]-d)*(e.total/e.size)),void 0)}var c,d,f;1==b.which&&(a.e_preventDefault(b),c="horizontal"==e.orientation?"pageX":"pageY",d=b[c],f=e.pos,a.on(document,"mousemove",h),a.on(document,"mouseup",g))}),a.on(this.node,"click",function(b){a.e_preventDefault(b);var d,c=e.inner.getBoundingClientRect();d="horizontal"==e.orientation?b.clientX<c.left?-1:b.clientX>c.right?1:0:b.clientY<c.top?-1:b.clientY>c.bottom?1:0,e.moveTo(e.pos+d*e.screen)}),a.on(this.node,"mousewheel",f),a.on(this.node,"DOMMouseScroll",f)}function d(a,c,d){this.addClass=a,this.horiz=new b(a,"horizontal",d),c(this.horiz.node),this.vert=new b(a,"vertical",d),c(this.vert.node),this.width=null}b.prototype.setPos=function(a,b){return 0>a&&(a=0),a>this.total-this.screen&&(a=this.total-this.screen),b||a!=this.pos?(this.pos=a,this.inner.style["horizontal"==this.orientation?"left":"top"]=a*(this.size/this.total)+"px",!0):!1},b.prototype.moveTo=function(a){this.setPos(a)&&this.scroll(a,this.orientation)};var c=10;b.prototype.update=function(a,b,d){var f,e=this.screen!=b||this.total!=a||this.size!=d;e&&(this.screen=b,this.total=a,this.size=d),f=this.screen*(this.size/this.total),c>f&&(this.size-=c-f,f=c),this.inner.style["horizontal"==this.orientation?"width":"height"]=f+"px",this.setPos(this.pos,e)},d.prototype.update=function(a){var b,c,d,e;return null==this.width&&(b=window.getComputedStyle?window.getComputedStyle(this.horiz.node):this.horiz.node.currentStyle,b&&(this.width=parseInt(b.height))),c=this.width||0,d=a.scrollWidth>a.clientWidth+1,e=a.scrollHeight>a.clientHeight+1,this.vert.node.style.display=e?"block":"none",this.horiz.node.style.display=d?"block":"none",e&&(this.vert.update(a.scrollHeight,a.clientHeight,a.viewHeight-(d?c:0)),this.vert.node.style.bottom=d?c+"px":"0"),d&&(this.horiz.update(a.scrollWidth,a.clientWidth,a.viewWidth-(e?c:0)-a.barLeft),this.horiz.node.style.right=e?c+"px":"0",this.horiz.node.style.left=a.barLeft+"px"),{right:e?c:0,bottom:d?c:0}},d.prototype.setScrollTop=function(a){this.vert.setPos(a)},d.prototype.setScrollLeft=function(a){this.horiz.setPos(a)},d.prototype.clear=function(){var a=this.horiz.node.parentNode;a.removeChild(this.horiz.node),a.removeChild(this.vert.node)},a.scrollbarModel.simple=function(a,b){return new d("CodeMirror-simplescroll",a,b)},a.scrollbarModel.overlay=function(a,b){return new d("CodeMirror-overlayscroll",a,b)}});